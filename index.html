<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>êµì‚¬ìš© ìˆ˜ì—… ë„êµ¬ ëª¨ìŒ</title>
  <style>
    /* ì „ì²´ í°íŠ¸ ì‚¬ì´ì¦ˆë¥¼ ì¡°ê¸ˆ í‚¤ì›€ */
    body {
      font-family: 'Noto Sans KR', 'Arial', sans-serif;
      font-size: 18px; /* ê¸°ë³¸ í¬ê¸° ìƒí–¥ */
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    .page-title {
      color: #2a623d;
      margin-bottom: 10px;
      font-size: 1.8rem; /* ì œëª©ì€ ì¢€ ë” í¬ê²Œ */
    }

    /* ì„¹ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
    .section {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      overflow: hidden;
      /* ë“œë˜ê·¸ ê°€ëŠ¥ ì†ì„± */
      cursor: move;
    }

    .section-header {
      background-color: #2a623d;
      color: white;
      padding: 10px 15px;
      font-size: 1.2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer; /* headerì—ë„ í´ë¦­ ê°€ëŠ¥í•˜ê²Œ */
    }

    .toggle-btn {
      background: none;
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      margin-left: 10px;
    }

    /* ì ‘í˜/í¼ì¹¨ì„ ì œì–´í•  ì»¨í…Œì´ë„ˆ */
    .section-content {
      display: block;
      transition: all 0.3s ease;
    }

    .section-content.hidden {
      display: none;
    }

    /* ì¹ íŒ ìŠ¤íƒ€ì¼ */
    .chalkboard-container {
      padding: 20px;
    }

    .chalkboard {
      background-color: #2a623d;
      color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
    }

    .text-tools {
      background-color: #f0f0f0;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      align-items: center;
    }

    .text-tools button,
    .text-tools select {
      padding: 5px 8px;
      border: 1px solid #ddd;
      border-radius: 3px;
      background-color: white;
      cursor: pointer;
      font-size: 1rem;
    }

    .divider {
      width: 1px;
      height: 20px;
      background-color: #ccc;
      margin: 0 5px;
    }

    .editor-container {
      position: relative;
      min-height: 200px;
    }

    #chalkboardEditor {
      width: 100%;
      min-height: 200px;
      background-color: transparent;
      outline: none;
      color: white;
      font-size: 20px; /* ì¹ íŒ ë‚´ìš©ì€ ì¢€ ë” í¬ê²Œ */
      line-height: 1.6;
      overflow-y: auto;
    }

    /* ë‚ ì§œ/ì‹œê°„í‘œ ìŠ¤íƒ€ì¼ */
    .date-timetable-section {
      padding: 20px;
    }
    .date-timetable {
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    .timetable-container {
      overflow-x: auto;
    }
    .timetable {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    .timetable th,
    .timetable td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
      min-width: 100px;
      font-size: 1.1rem;
    }
    .timetable th {
      background-color: #f2f2f2;
    }
    .subjectSelector {
      font-size: 1.1rem;
      padding: 5px;
    }

    .customSubject {
      margin-top: 5px;
      width: 90%;
      box-sizing: border-box;
      font-size: 1rem;
      padding: 5px;
    }

    /* ì‹œê³„ ë° íƒ€ì´ë¨¸ ìŠ¤íƒ€ì¼ */
    .time-section {
      display: flex;
      gap: 20px;
      padding: 20px;
    }
    .clock,
    .timer {
      flex: 1;
      padding: 15px;
      background-color: #f8f8f8;
      border-radius: 10px;
      text-align: center;
      border: 1px solid #e0e0e0;
    }
    .time-display {
      font-size: 2.5rem;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
      font-weight: bold;
    }
    .timer-inputs {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin-bottom: 10px;
    }
    .timer-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    .timer-controls button {
      padding: 8px 15px;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      color: white;
      font-size: 1rem;
    }
    .start-btn {
      background-color: #4CAF50;
    }
    .stop-btn {
      background-color: #f44336;
    }
    .reset-btn {
      background-color: #2196F3;
    }

    /* í•™ìƒ ë½‘ê¸° ì•± ìŠ¤íƒ€ì¼ */
    .picker-section {
      padding: 20px;
    }
    .picker-controls {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      align-items: center;
      flex-wrap: wrap;
    }
    .picker-controls input,
    .picker-controls button {
      padding: 8px 12px;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-size: 1rem;
    }
    .picker-controls button {
      background-color: #2a623d;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .picker-controls button:hover {
      background-color: #224e31;
    }
    .result-area {
      min-height: 100px;
      margin-top: 15px;
      padding: 15px;
      background-color: #f8f8f8;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-size: 1rem;
    }

    /* ì¶œì„ë¶€ & ì¡° í¸ì„± (ì¶”í›„ í™•ì¥ ê°€ëŠ¥) */
    .attendance-container {
      padding: 20px;
    }
    .tab-header {
      display: flex;
      margin-bottom: 15px;
      border-bottom: 1px solid #ddd;
    }
    .tab-btn {
      padding: 10px 20px;
      background-color: #f0f0f0;
      border: 1px solid #ddd;
      border-bottom: none;
      cursor: pointer;
      margin-right: 5px;
      border-radius: 5px 5px 0 0;
    }
    .tab-btn.active {
      background-color: white;
      border-bottom: 1px solid white;
      margin-bottom: -1px;
    }
    .tab-content {
      display: none;
      padding: 15px;
      background-color: #f8f8f8;
      border-radius: 5px;
      border: 1px solid #ddd;
    }
    .tab-content.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th,
    td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    .student-row:nth-child(even) {
      background-color: #f9f9f9;
    }
    .present {
      background-color: #dff0d8;
    }
    .absent {
      background-color: #f2dede;
    }
    .late {
      background-color: #fcf8e3;
    }
    /* ìœ íŠœë¸Œ ì„ë² ë“œ ìŠ¤íƒ€ì¼ (ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë””ìì¸) */
.youtube-embed {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 ë¹„ìœ¨ ìœ ì§€ */
  height: 0;
  overflow: hidden;
  max-width: 100%;
  margin: 15px auto;
  border-radius: 10px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  border: 2px solid #2a623d;
}

.youtube-embed iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 8px;
}
  </style>
</head>
<body>
  <header>
    <h1 class="page-title">êµì‚¬ìš© ìˆ˜ì—… ë„êµ¬ ëª¨ìŒ</h1>
    <p>ìˆ˜ì—… ì§„í–‰ì— í•„ìš”í•œ ë‹¤ì–‘í•œ ë„êµ¬ë“¤ì„ ë¡œê·¸ì¸ ì—†ì´ ì‚¬ìš©í•˜ì„¸ìš”</p>
  </header>

  <!-- ì „ì²´ ì„¹ì…˜ì„ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆ (ë“œë˜ê·¸ì•¤ë“œë¡­ìš©) -->
  <div id="sectionsContainer">
    <!-- 1. ì¹ íŒ -->
    <div class="section" draggable="true">
      <div class="section-header">
        <span>ìˆ˜ì—… ì¹ íŒ</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="chalkboard-container">
          <div class="text-tools">
            <button id="boldBtn" title="êµµê²Œ"><strong>B</strong></button>
            <button id="italicBtn" title="ê¸°ìš¸ì„"><em>I</em></button>
            <button id="underlineBtn" title="ë°‘ì¤„"><u>U</u></button>
            <div class="divider"></div>
            
            <!-- ê¸€ì í¬ê¸°: ì‘ê²Œ(16px), ë³´í†µ(18px), í¬ê²Œ(24px), ë§¤ìš° í¬ê²Œ(32px) -->
            <select id="fontSizeSelector" title="ê¸€ì í¬ê¸°">
              <option value="16px">ì‘ê²Œ</option>
              <option value="18px" selected>ë³´í†µ</option>
              <option value="24px">í¬ê²Œ</option>
              <option value="32px">ë§¤ìš° í¬ê²Œ</option>
            </select>
            
            <!-- í…ìŠ¤íŠ¸ ìƒ‰ê¹”ì— ê²€ì •ìƒ‰ ì¶”ê°€ -->
            <select id="textColorSelector" title="ê¸€ì ìƒ‰ìƒ">
              <option value="white">í°ìƒ‰</option>
              <option value="black">ê²€ì •ìƒ‰</option>
              <option value="yellow">ë…¸ë€ìƒ‰</option>
              <option value="lightblue">í•˜ëŠ˜ìƒ‰</option>
              <option value="pink">ë¶„í™ìƒ‰</option>
              <option value="#ffcc00">ì£¼í™©ìƒ‰</option>
              <option value="#90ee90">ì—°ë‘ìƒ‰</option>
            </select>
            
            <button id="highlightBtn" title="ê°•ì¡°í‘œì‹œ">í˜•ê´‘íœ</button>
            <div class="divider"></div>
            
            <!-- ì „ì²´ ì§€ìš°ê¸° -->
            <button id="clearBtn" title="ì§€ìš°ê¸°">ì „ì²´ ì§€ìš°ê¸°</button>
            <button id="copyBtn" title="ë³µì‚¬">ë³µì‚¬</button>
          </div>
           <!-- ğŸ‘‰ ì´ ìœ„ì¹˜ì— ì¶”ê°€ ğŸ‘ˆ -->
  <div class="divider"></div>
  <button id="youtubeEmbedBtn" title="ìœ íŠœë¸Œ ì‚½ì…">ìœ íŠœë¸Œ</button>
</div>
          <div class="chalkboard">
            <div class="editor-container">
              <div id="chalkboardEditor" contenteditable="true" spellcheck="false"
                   placeholder="ì—¬ê¸°ì— ìˆ˜ì—… ë‚´ìš©ì„ ì ìœ¼ì„¸ìš”...">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. ì˜¤ëŠ˜ ë‚ ì§œ & ì‹œê°„í‘œ -->
    <div class="section" draggable="true">
      <div class="section-header">
        <span>ì˜¤ëŠ˜ ë‚ ì§œ ë° ì‹œê°„í‘œ</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="date-timetable-section">
          <div class="date-timetable">
            <strong>ì˜¤ëŠ˜ ë‚ ì§œ:</strong> <span id="todayInfo"></span>
          </div>
          <div class="timetable-container">
            <table class="timetable">
              <thead>
                <tr>
                  <th>1êµì‹œ</th>
                  <th>2êµì‹œ</th>
                  <th>3êµì‹œ</th>
                  <th>4êµì‹œ</th>
                  <th>5êµì‹œ</th>
                  <th>6êµì‹œ</th>
                  <th>7êµì‹œ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                  <td>
                    <select class="subjectSelector">
                      <option>êµ­ì–´</option>
                      <option>ìˆ˜í•™</option>
                      <option>ì‚¬íšŒ</option>
                      <option>ê³¼í•™</option>
                      <option>ì˜ì–´</option>
                      <option>ìŒì•…</option>
                      <option>ë¯¸ìˆ </option>
                      <option>ì²´ìœ¡</option>
                      <option>ì‹¤ê³¼</option>
                      <option>ë„ë•</option>
                      <option>ìœ¤ë¦¬</option>
                      <option>ì—­ì‚¬</option>
                      <option>ê°€ì •</option>
                      <option>ê¸°ìˆ </option>
                      <option>ì…ë ¥</option>
                    </select>
                    <input type="text" class="customSubject" style="display:none" placeholder="ì§ì ‘ ì…ë ¥"/>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>    <!-- Perplexity ê²€ìƒ‰ -->
    <div class="section" draggable="true">
      <div class="section-header">
        <span>Perplexity ê²€ìƒ‰</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="picker-section" style="padding: 20px;">
          <div class="picker-controls" style="margin-bottom: 10px; flex-wrap: nowrap;">
            <label for="perplexInput" style="margin-right: 5px;">ê²€ìƒ‰ì–´:</label>
            <input type="text" id="perplexInput" placeholder="ê¶ê¸ˆí•œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" style="flex:1; min-width:200px;"/>
            <button id="perplexBtn" style="margin-left: 10px;">ê²€ìƒ‰</button>
          </div>
          <p>Perplexity.ai ë¡œ ì´ë™í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>

    <div class="section" draggable="true">
      <div class="section-header">
        <span>ì‹œê°„ ê´€ë¦¬</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="time-section">
          <!-- ë””ì§€í„¸ ì‹œê³„ -->
          <div class="clock">
            <h3>í˜„ì¬ ì‹œê°„</h3>
            <div id="clockDisplay" class="time-display">00:00:00</div>
            <div id="dateDisplay"></div>
          </div>

          <!-- íƒ€ì´ë¨¸ -->
          <div class="timer">
            <h3>ìˆ˜ì—… íƒ€ì´ë¨¸</h3>
            <div class="timer-inputs">
              <input type="number" id="hoursInput" min="0" max="99" placeholder="ì‹œ" style="width: 60px" />
              <input type="number" id="minutesInput" min="0" max="59" placeholder="ë¶„" style="width: 60px" />
              <input type="number" id="secondsInput" min="0" max="59" placeholder="ì´ˆ" style="width: 60px" />
            </div>
            <div id="timerDisplay" class="time-display">00:00:00</div>
            <div class="timer-controls">
              <button id="startTimerBtn" class="start-btn">ì‹œì‘</button>
              <button id="stopTimerBtn" class="stop-btn">ì •ì§€</button>
              <button id="resetTimerBtn" class="reset-btn">ì´ˆê¸°í™”</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 4. í•™ìƒ ë½‘ê¸° -->
    <div class="section" draggable="true">
      <div class="section-header">
        <span>í•™ìƒ ë½‘ê¸°</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="picker-section">
          <div class="picker-controls">
            <div>
              <label for="totalStudents">í•™ìƒ ì´ ìˆ˜:</label>
              <input type="number" id="totalStudents" min="1" value="30" />
            </div>
            <div>
              <label for="pickCount">ë½‘ì„ í•™ìƒ ìˆ˜:</label>
              <input type="number" id="pickCount" min="1" value="1" />
            </div>
            <button id="pickStudentsBtn">í•™ìƒ ë½‘ê¸°</button>
            <button id="resetPickerBtn">ì´ˆê¸°í™”</button>
          </div>
          <div id="pickerResult" class="result-area">
            <p>í•™ìƒì„ ë½‘ìœ¼ë©´ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 5. ëª¨ë‘  í¸ì„± -->
    <div class="section" draggable="true">
      <div class="section-header">
        <span>ëª¨ë‘  í¸ì„±</span>
        <button class="toggle-btn" aria-label="toggle">ì ‘ê¸°/í¼ì¹˜ê¸°</button>
      </div>
      <div class="section-content">
        <div class="picker-section">
          <div class="picker-controls">
            <div>
              <label for="teamTotalStudents">í•™ìƒ ì´ ìˆ˜:</label>
              <input type="number" id="teamTotalStudents" min="1" value="30" />
            </div>
            <div>
              <label for="missingNumbers">ì—†ëŠ” ë²ˆí˜¸:</label>
              <input type="text" id="missingNumbers" placeholder="ì˜ˆ: 3, 7, 15" style="width:120px"/>
            </div>
            <div>
              <label for="groupCount">ëª¨ë‘  ìˆ˜:</label>
              <input type="number" id="groupCount" min="1" value="4" />
            </div>
            <button id="makeTeamsBtn">ëª¨ë‘  ì§œê¸°</button>
            <button id="resetTeamsBtn">ì´ˆê¸°í™”</button>
          </div>
          <div id="teamsResult" class="result-area">
            <p>ëª¨ë‘  í¸ì„± ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- sectionsContainer end -->

  <script>
    // -----------------------------
    // (A) ì ‘ì—ˆë‹¤ í´ê¸° ê¸°ëŠ¥
    // -----------------------------
    const sections = document.querySelectorAll('.section');
    sections.forEach((sec) => {
      const header = sec.querySelector('.section-header');
      const toggleBtn = sec.querySelector('.toggle-btn');
      const content = sec.querySelector('.section-content');
      if (header && content && toggleBtn) {
        header.addEventListener('click', () => {
          // toggle content
          content.classList.toggle('hidden');
        });
      }
    });

    // -----------------------------
    // (B) ì„¹ì…˜ Drag & Drop ê¸°ëŠ¥
    // -----------------------------
    const container = document.getElementById('sectionsContainer');
    let draggedSection = null;

    // ëª¨ë“  .section ìš”ì†Œì— ëŒ€í•´, dragstart / dragend / dragover / drop í•¸ë“¤ëŸ¬ ì„¤ì •
    sections.forEach((section) => {
      // ë“œë˜ê·¸ ì‹œì‘
      section.addEventListener('dragstart', (e) => {
        draggedSection = section;
        section.style.opacity = '0.4'; // ì‹œê°ì  íš¨ê³¼
      });

      // ë“œë˜ê·¸ ë
      section.addEventListener('dragend', (e) => {
        draggedSection = null;
        section.style.opacity = '1';
      });

      // ë“œë˜ê·¸ ì¤‘, ë‹¤ë¥¸ ì„¹ì…˜ ìœ„ì— ì˜¤ë©´
      section.addEventListener('dragover', (e) => {
        e.preventDefault(); // drop ì´ë²¤íŠ¸ í—ˆìš©
      });

      // ë“œë¡­
      section.addEventListener('drop', (e) => {
        e.preventDefault();
        if (!draggedSection) return;
        if (draggedSection === section) return; // ìê¸° ìì‹  ìœ„ë¼ë©´ ë¬´ì‹œ

        // ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì™€ ì„¹ì…˜ì˜ ì¤‘ê°„ ì§€ì ì„ ë¹„êµí•´, draggedSectionì„ section ìœ„ë¡œ/ì•„ë˜ë¡œ ë†“ì„ì§€ ê²°ì •
        const rect = section.getBoundingClientRect();
        const midY = rect.top + rect.height / 2;
        const dropY = e.clientY;

        if (dropY < midY) {
          // ì„¹ì…˜ ì¤‘ì•™ë³´ë‹¤ ìœ„ìª½ => draggedSectionì„ section ì•ì—
          container.insertBefore(draggedSection, section);
        } else {
          // ì•„ë˜ìª½ => section ë‹¤ìŒì—
          container.insertBefore(draggedSection, section.nextSibling);
        }
      });
    });

    // -----------------------------
    // 1. ì¹ íŒ ê¸°ëŠ¥
    // -----------------------------
    const chalkboardEditor = document.getElementById('chalkboardEditor');
    const boldBtn = document.getElementById('boldBtn');
    const italicBtn = document.getElementById('italicBtn');
    const underlineBtn = document.getElementById('underlineBtn');
    const fontSizeSelector = document.getElementById('fontSizeSelector');
    const textColorSelector = document.getElementById('textColorSelector');
    const highlightBtn = document.getElementById('highlightBtn');
    const clearBtn = document.getElementById('clearBtn');
    const copyBtn = document.getElementById('copyBtn');

    boldBtn.addEventListener('click', () => {
      document.execCommand('bold', false, null);
      chalkboardEditor.focus();
    });
    italicBtn.addEventListener('click', () => {
      document.execCommand('italic', false, null);
      chalkboardEditor.focus();
    });
    underlineBtn.addEventListener('click', () => {
      document.execCommand('underline', false, null);
      chalkboardEditor.focus();
    });

    // í°íŠ¸ í¬ê¸° (ì‘ê²Œ~ë§¤ìš° í¬ê²Œ)
    // execCommand('fontSize', false, ...)ëŠ” ì •ìˆ˜ê°’(1~7)ë§Œ ë°›ìœ¼ë¯€ë¡œ, px -> ìˆ«ì ë§¤í•‘
    const sizeMap = {
      '16px': '2', // ì‘ê²Œ
      '18px': '3', // ë³´í†µ
      '24px': '5', // í¬ê²Œ
      '32px': '7', // ë§¤ìš° í¬ê²Œ
    };

    fontSizeSelector.addEventListener('change', () => {
      const chosenPx = fontSizeSelector.value;
      const commandValue = sizeMap[chosenPx] || '3';
      // 1) execCommandë¡œ ì„ì‹œ font size ì„¤ì •
      document.execCommand('fontSize', false, commandValue);

      // 2) ë°©ê¸ˆ ì ìš©ëœ <font size="commandValue"> ìš”ì†Œë“¤ì„ ì°¾ì•„ style.fontSizeë¡œ ì¹˜í™˜
      const selection = window.getSelection();
      if (selection.rangeCount > 0) {
        const range = selection.getRangeAt(0);
        if (!range.collapsed) {
          const clonedContents = range.cloneContents();
          const elements = clonedContents.querySelectorAll('font[size="' + commandValue + '"]');
          for (let i = 0; i < elements.length; i++) {
            elements[i].removeAttribute('size');
            elements[i].style.fontSize = chosenPx;
          }
          range.deleteContents();
          range.insertNode(clonedContents);
        }
      }
      chalkboardEditor.focus();
    });

    // ê¸€ì ìƒ‰
    textColorSelector.addEventListener('change', () => {
      document.execCommand('foreColor', false, textColorSelector.value);
      chalkboardEditor.focus();
    });

    // í˜•ê´‘íœ (ë°°ê²½ìƒ‰)
    highlightBtn.addEventListener('click', () => {
      document.execCommand('hiliteColor', false, 'yellow');
      chalkboardEditor.focus();
    });

    // ì „ì²´ ì§€ìš°ê¸°
    clearBtn.addEventListener('click', () => {
      chalkboardEditor.innerHTML = '';
    });

    // ë³µì‚¬ ë²„íŠ¼
    copyBtn.addEventListener('click', () => {
      /* TODO: Confirm with user: if environment blocks navigator.clipboard, fallback is used. Is that expected? */
      const text = chalkboardEditor.innerText || chalkboardEditor.textContent;
      // Attempt newer API first
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text)
          .then(() => alert('ì¹ íŒ ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'))
          .catch(err => {
            console.error('Clipboard API error:', err);
            fallbackCopy(text);
          });
      } else {
        fallbackCopy(text);
      }
    });

    // Older fallback method
    function fallbackCopy(str) {
      try {
        const temp = document.createElement('textarea');
        temp.value = str;
        document.body.appendChild(temp);
        temp.select();
        document.execCommand('copy');
        document.body.removeChild(temp);
        alert('ì¹ íŒ ë‚´ìš©ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! (fallback)');
      } catch (err) {
        console.error('Fallback copy error:', err);
        alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
    }
function embedYoutubeIntoChalkboard(youtubeUrl, width, height) {
  let videoId = '';
  const regexShort = /youtu\.be\/(.+)/;
  const regexLong  = /v=([^&]+)/;

  if (regexShort.test(youtubeUrl)) {
    videoId = youtubeUrl.match(regexShort)[1].split('?')[0];
  } else if (regexLong.test(youtubeUrl)) {
    videoId = youtubeUrl.match(regexLong)[1];
  } else {
    alert('ìœ íš¨í•œ ìœ íŠœë¸Œ ì£¼ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤.');
    return;
  }

  const embedUrl = `https://www.youtube.com/embed/${videoId}`;
  const iframeHtml = `
    <div class="youtube-embed" style="width:${width}; height:${height};">
      <iframe src="${embedUrl}" frameborder="0" allowfullscreen></iframe>
    </div>
  `;

  chalkboardEditor.innerHTML += iframeHtml;
}

// ë²„íŠ¼ ì´ë²¤íŠ¸
const youtubeEmbedBtn = document.getElementById('youtubeEmbedBtn');
youtubeEmbedBtn.addEventListener('click', () => {
  const url = prompt('ìœ íŠœë¸Œ ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”.\nì˜ˆ) https://youtu.be/xxxxx');
  if (!url) return;

  // ì‚¬ìš©ìì—ê²Œ í¬ê¸° ì…ë ¥ë°›ê¸°
  let width = prompt('ë™ì˜ìƒì˜ ë„ˆë¹„ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 600px ë˜ëŠ” 100%)', '100%');
  if (!width) width = '100%';
  
  let height = prompt('ë™ì˜ìƒì˜ ë†’ì´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 300px ë˜ëŠ” auto)', 'auto');
  if (!height) height = 'auto';

  embedYoutubeIntoChalkboard(url.trim(), width, height);
});

    // -----------------------------
    // 2. ì˜¤ëŠ˜ ë‚ ì§œ ë° ì‹œê°„í‘œ
    // -----------------------------
    const todayInfo = document.getElementById('todayInfo');
    function formatKoreanDate(date) {
      const year = date.getFullYear();
      const month = date.getMonth() + 1;
      const day = date.getDate();
      const weekdays = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
      const weekday = weekdays[date.getDay()];
      return `${year}ë…„ ${month}ì›” ${day}ì¼ ${weekday}`;
    }
    todayInfo.textContent = formatKoreanDate(new Date());

    const subjectColors = {
      'êµ­ì–´': '#ffe0e0',
      'ìˆ˜í•™': '#e0ffe0',
      'ì‚¬íšŒ': '#e0e0ff',
      'ê³¼í•™': '#ffe0ff',
      'ì˜ì–´': '#fffee0',
      'ìŒì•…': '#e0ffff',
      'ë¯¸ìˆ ': '#ffffe0',
      'ì²´ìœ¡': '#d6f5d6',
      'ì‹¤ê³¼': '#ffd5ec',
      'ë„ë•': '#e3ffd5',
      'ìœ¤ë¦¬': '#f3d5ff',
      'ì—­ì‚¬': '#fff0c5',
      'ê°€ì •': '#fce0ff',
      'ê¸°ìˆ ': '#d5fff0'
    };
    const subjectSelectors = document.querySelectorAll('.subjectSelector');
    subjectSelectors.forEach((sel) => {
      sel.addEventListener('change', function () {
        const parentCell = sel.closest('td');
        const customInput = parentCell.querySelector('.customSubject');
        const selectedValue = this.value;
        if (selectedValue === 'ì…ë ¥') {
          customInput.style.display = 'block';
          parentCell.style.backgroundColor = '';
        } else {
          customInput.style.display = 'none';
          parentCell.style.backgroundColor = subjectColors[selectedValue] || '#ffffcc';
        }
      });
    });

    // -----------------------------
    // 3. ë””ì§€í„¸ ì‹œê³„ & íƒ€ì´ë¨¸ ê¸°ëŠ¥ + ì‚¬ìš´ë“œ
    // -----------------------------
    const clockDisplay = document.getElementById('clockDisplay');
    const dateDisplay = document.getElementById('dateDisplay');

    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');

      clockDisplay.textContent = `${hours}:${minutes}:${seconds}`;

      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      dateDisplay.textContent = now.toLocaleDateString('ko-KR', options);
    }
    setInterval(updateClock, 1000);
    updateClock();

    const hoursInput = document.getElementById('hoursInput');
    const minutesInput = document.getElementById('minutesInput');
    const secondsInput = document.getElementById('secondsInput');
    const timerDisplay = document.getElementById('timerDisplay');
    const startTimerBtn = document.getElementById('startTimerBtn');
    const stopTimerBtn = document.getElementById('stopTimerBtn');
    const resetTimerBtn = document.getElementById('resetTimerBtn');

    function playBeep() {
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      if (!window.beepContext) {
        window.beepContext = new AudioContext();
      }
      const ctx = window.beepContext;
      const oscillator = ctx.createOscillator();
      oscillator.type = 'sine';
      oscillator.frequency.setValueAtTime(440, ctx.currentTime);
      const gainNode = ctx.createGain();
      gainNode.gain.value = 0.2;
      oscillator.connect(gainNode);
      gainNode.connect(ctx.destination);
      oscillator.start();
      setTimeout(() => {
        oscillator.stop();
      }, 500);
    }

    let timerInterval;
    let timerSeconds = 0;

    function updateTimerDisplay() {
      const hours = Math.floor(timerSeconds / 3600);
      const minutes = Math.floor((timerSeconds % 3600) / 60);
      const seconds = timerSeconds % 60;
      timerDisplay.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }

    startTimerBtn.addEventListener('click', () => {
      if (!timerInterval) {
        if (timerSeconds === 0) {
          const h = parseInt(hoursInput.value) || 0;
          const m = parseInt(minutesInput.value) || 0;
          const s = parseInt(secondsInput.value) || 0;
          timerSeconds = h * 3600 + m * 60 + s;
          if (timerSeconds === 0) return;
        }
        timerInterval = setInterval(() => {
          if (timerSeconds > 0) {
            timerSeconds--;
            updateTimerDisplay();
          } else {
            clearInterval(timerInterval);
            timerInterval = null;
            playBeep();
            alert('íƒ€ì´ë¨¸ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
          }
        }, 1000);
      }
    });

    stopTimerBtn.addEventListener('click', () => {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    });

    resetTimerBtn.addEventListener('click', () => {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
      hoursInput.value = '';
      minutesInput.value = '';
      secondsInput.value = '';
      timerSeconds = 0;
      updateTimerDisplay();
    });

    // Perplexity ê²€ìƒ‰ ë¡œì§
    const perplexBtn = document.getElementById('perplexBtn');
    const perplexInput = document.getElementById('perplexInput');
    if (perplexBtn && perplexInput) {
      perplexBtn.addEventListener('click', () => {
        const query = encodeURIComponent(perplexInput.value.trim());
        if (!query) {
          alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
          return;
        }
        const perplexUrl = `https://www.perplexity.ai/?q=${query}`;
        window.open(perplexUrl, '_blank');
      });
    }

    // -----------------------------
    // 4. í•™ìƒ ë½‘ê¸°
    // -----------------------------
    const totalStudentsInput = document.getElementById('totalStudents');
    const pickCountInput = document.getElementById('pickCount');
    const pickStudentsBtn = document.getElementById('pickStudentsBtn');
    const resetPickerBtn = document.getElementById('resetPickerBtn');
    const pickerResult = document.getElementById('pickerResult');

    let pickedStudents = [];

    pickStudentsBtn.addEventListener('click', () => {
      const totalStudents = parseInt(totalStudentsInput.value);
      let pickCount = parseInt(pickCountInput.value);

      if (isNaN(totalStudents) || totalStudents < 1) {
        alert('ìœ íš¨í•œ í•™ìƒ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        return;
      }
      if (isNaN(pickCount) || pickCount < 1) {
        alert('ìœ íš¨í•œ ë½‘ì„ í•™ìƒ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        return;
      }
      if (pickCount > totalStudents) {
        pickCount = totalStudents;
        pickCountInput.value = totalStudents;
      }

      // ì´ë¯¸ ë½‘íŒ í•™ìƒ ì œì™¸í•˜ê³  ë½‘ê¸°
      const availableStudents = Array.from({ length: totalStudents }, (_, i) => i + 1).filter(
        (num) => !pickedStudents.includes(num)
      );

      if (availableStudents.length === 0) {
        alert('ëª¨ë“  í•™ìƒì´ ì´ë¯¸ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ì´ˆê¸°í™” ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
        return;
      }
      if (pickCount > availableStudents.length) {
        pickCount = availableStudents.length;
      }

      // ëœë¤ ì…”í”Œ
      for (let i = availableStudents.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [availableStudents[i], availableStudents[j]] = [availableStudents[j], availableStudents[i]];
      }

      const selectedStudents = availableStudents.slice(0, pickCount);
      pickedStudents = [...pickedStudents, ...selectedStudents];

      pickerResult.innerHTML = `\n        <p><strong>ì„ íƒëœ í•™ìƒ ë²ˆí˜¸:</strong> ${selectedStudents.sort((a, b) => a - b).join(', ')}<\/p>\n        <p><strong>ì§€ê¸ˆê¹Œì§€ ë½‘íŒ í•™ìƒ:</strong> ${pickedStudents.sort((a, b) => a - b).join(', ')}<\/p>\n        <p><strong>ë‚¨ì€ í•™ìƒ ìˆ˜:</strong> ${totalStudents - pickedStudents.length}ëª…<\/p>\n      `;
    });

    resetPickerBtn.addEventListener('click', () => {
      pickedStudents = [];
      pickerResult.innerHTML = '<p>í•™ìƒì„ ë½‘ìœ¼ë©´ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
    });

    // -----------------------------
    // 5. ëª¨ë‘  í¸ì„±
    // -----------------------------
    const makeTeamsBtn = document.getElementById('makeTeamsBtn');
    const resetTeamsBtn = document.getElementById('resetTeamsBtn');
    const teamTotalStudents = document.getElementById('teamTotalStudents');
    const missingNumbersInput = document.getElementById('missingNumbers');
    const groupCountInput = document.getElementById('groupCount');
    const teamsResult = document.getElementById('teamsResult');

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    makeTeamsBtn.addEventListener('click', () => {
      const total = parseInt(teamTotalStudents.value);
      if (isNaN(total) || total < 1) {
        alert('ìœ íš¨í•œ í•™ìƒ ì´ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        return;
      }

      const groupCount = parseInt(groupCountInput.value);
      if (isNaN(groupCount) || groupCount < 1) {
        alert('ìœ íš¨í•œ ëª¨ë‘  ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        return;
      }

      const missingStr = missingNumbersInput.value.trim();
      let missingNums = [];
      if (missingStr) {
        const parts = missingStr.split(',');
        parts.forEach((p) => {
          const val = parseInt(p);
          if (!isNaN(val)) {
            missingNums.push(val);
          }
        });
      }

      missingNums = missingNums.filter((n) => n >= 1 && n <= total);

      let available = [];
      for (let i = 1; i <= total; i++) {
        if (!missingNums.includes(i)) {
          available.push(i);
        }
      }

      if (available.length === 0) {
        alert('ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í•™ìƒ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤! (ëª¨ë‘ ì—†ëŠ” ë²ˆí˜¸ë¡œ ì§€ì •ë¨)');
        return;
      }

      shuffleArray(available);

      const teams = [];
      for (let i = 0; i < groupCount; i++) {
        teams.push([]);
      }
      let idx = 0;
      available.forEach((student) => {
        teams[idx].push(student);
        idx = (idx + 1) % groupCount;
      });

      let html = '';
      teams.forEach((team, i) => {
        team.sort((a, b) => a - b);
        html += `<p><strong>${i + 1}ëª¨ë‘  (${team.length}ëª…):</strong> ${team.join(', ')}</p>`;
      });

      teamsResult.innerHTML = html;
    });

    resetTeamsBtn.addEventListener('click', () => {
      teamTotalStudents.value = 30;
      missingNumbersInput.value = '';
      groupCountInput.value = 4;
      teamsResult.innerHTML = '<p>ëª¨ë‘  í¸ì„± ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>';
    });

    // -----------------------------
    // (C) TEST CASES
    // -----------------------------
    // We add some minimal test code. Note: this is purely for demonstration.

    // 1) Test copying when Clipboard API is disallowed
    //    Expect fallback method (document.execCommand) to be used
    // 2) Test normal environment with navigator.clipboard
    //    Expect normal .writeText to succeed
    // (We ask: "What is the expected behavior if both fail?")

    /*
      Example usage:
      1) Open in a modern, secure context -> copyBtn should use navigator.clipboard
      2) Open in older or restricted environment -> fallback copy
    */
  </script>

<footer style="text-align: center; padding: 20px 0; background-color: #f8f8f8; border-top: 1px solid #ddd; margin-top: 40px;">
  <p style="font-size: 1rem; color: #2a623d;">
    <a href="https://pebble-stallion-abb.notion.site/1b210244f99780a19431c44075aa2c69?pvs=4" target="_blank" style="color: #2a623d; text-decoration: none;">ê°œë°œìì— ì œì•ˆí•˜ê¸°</a>
  </p>
  <p style="font-size: 1rem; color: #2a623d;">
    &copy; 2025 <a href="https://www.youtube.com/@%EB%B0%B0%EC%9B%80%EC%9D%98%EB%8B%AC%EC%9D%B8-p5v" target="_blank" style="color: #2a623d; text-decoration: none;">ë°°ì›€ì˜ ë‹¬ì¸ ê¹€ë¬¸ì •</a>. All Rights Reserved.
  </p>
</footer>

